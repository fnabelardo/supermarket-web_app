@model SalesViewModel

@section title
{
    <div class="row">
        <div class="col-7"><h3> Cashier's Console</h3></div>
        <div class="col-2"><label for="cashier"> Cashier Name:</label></div>
        <div class="col-3">
            @* Display Cashier's name here *@
        </div>
    </div> 
}

<br/>
<div class="row">
    <div class="col-4">
        @* Category selection *@
        <select asp-for="SelectedCategoryId" class="form-control">
            <option> --- Select ---</option>
            @if (Model.Categories != null && Model.Categories.Any())
            {
                @foreach (var cat in Model.Categories)
                {
                    <option value="@cat.CategoryId">@cat.Name</option>
                }
            }
        </select>
        <br/>
        <div id="productsPartialList">
            @* Product List *@
        </div>
        <div id="productDetails">
            @* Product Details *@
        </div>
        @* Sales form *@
    </div>
    <div class="col">
        @* List of transactions *@ 
    </div>

</div>

 @section Scripts{
     <script>
         $(function() {
           //Handel category selection
           // Populate product partial list
           $("#SelectedCategoryId").on("change", function () {
               $("#productsPartialList").load("/products/ProductsByCategoryPartial", {categoryId: $(this).val()})
           })
           //END Handel category selection
           
           //Handle product selection
           //Change the background color of the selected product          
           $('#productsPartialList').on('click', '.product-row', function () {
               
               //Highlight selected product
               $('.product-row').removeClass('highlight');
               $(this).addClass('highlight');
               
               //Show product details form
               let productId = $(this).attr('product-id');
           })
           //END Handle product selection
         });
     </script>
 }